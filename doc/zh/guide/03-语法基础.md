# 语法基础

## 语言特性

`batScript`是一个静态的,结构化的语言.这意味着:

- 程序由上到下依次执行
- 变量是强类型的.所有变量必须先声明再使用.变量的类型不可变
- 函数/过程必须返回指定类型的返回值(无返回值的函数/过程则称为过程)
- 不支持面向对象

## 语法规则

编写`batScript`时,需要遵循以下规则:

- 命名区分大小写
- 每一行的结尾需要`;`
- 模块导入(`lib`/`pkg`)位于代码的最开头部分
- 脚本文件以`.bs`作为后缀名
- 一行代码只能有一个`;`

此外,`batScript`有以下默认行为:

- 脚本默认关闭回显`@echo off`  
- 没有显式的程序入口函数/过程要求

## 注释

`batScript`中,有两种注释形式.

### 单行注释

使用`#`表示单行注释.`#`及同行之后的内容将被注释掉.

```batscript
let const_1: num = 1 + 1; # 单行注释: 最基础的运算.常量可以在构建时通过表达式赋值
```

### 多行注释

`/*`和`*/`中间的内容将被视为多行注释.  

```batscript
/*
导入Std包,并输出Hello World
*/
lib Std;
echo('Hello World');
```

多行注释也可以嵌入到代码中:  

```batscript
echoline/*内嵌注释*/("OK!")
```

## 文档字符串

为提高代码的可读性,根据规范,在文件开头和函数/过程前需要加入符合范式的多行注释,称为文档字符串.  

> 在`batScript`中,使用`::`包裹文档字符串中的对应项

### 文件开头的文档字符串

示例:

```batscript
/*
:description: A batScript sample 
:file: sample.bs
:author: WateRun
:time: 2025-09-04
*/
```

包含以下内容:

- `description`: 文件的描述
- `file`: 文件名
- `author`: 作者
- `time`: 时间

包含的内容可以自行添加和修改.

### 函数/过程的文档字符串

示例:

```batscript
/*
:description: a function that do noting 
:param param_1: first num param
:param param_2: second string param
:return: return an empty bool array
*/
func myFunc(param_1: num, param_2: str) -> arr<bool>
{
    set result: arr<bool> = [];
    return result;
}
```

包含以下内容:

- `description`: 函数/过程的描述
- `param [param name]`: 参数及参数说明
- `return [return type]`: 函数/过程的返回值(`proc`无此项)

## 编码规范

在编写`.bs`时,需要遵循如下编码规范:

- 有意义的变量和函数/过程名
- 括号单启一行(即ALLMAN风格)
- 二元运算符间添加空格
- 编写文档字符串

并遵循以下命名规范:

- 变量名: 使用小写+下划线.如`my_var`
- 常量名: 使用大写+下划线.如`A_CONST`
- 函数/过程: 使用小驼峰.如`thisIsAFunction`
- 文件名: 使用大驼峰.如`NewNamespace`,`FirstBs.bs`

> 关于编码规范的详细说明,见[编码规范详细说明文档]()

## 示例程序

接下来,你可以尝试直接阅读以下示例文档,看看你能不能读懂.如果发现你读起来很容易,那么你已经入门`batScript`大半了.

### 第一个示例程序

以下是一个简单的示例程序.它做了一件很简单的事情: 打印HelloWorld.

```batscript
/*
:description: 最简单的 Hello World 程序
:file: hello.bs
:author: batScript示例
*/

lib Std; # 导入"标准"库,包含了一些最常用的功能

echoline("Hello World!"); # 打印HelloWorld. 
pause(); # 暂停,保留窗体
```

说明:

- `lib`的作用和C语言中的`#include`类似.区别在于,`lib`只会查找内置库(即和`bsc.exe`同目录下的`bslib`)中的`.bs`文件,且只导入通过`out`参数导出的内容
- `echoline()`函数/过程和`pause()`函数/过程都是从`Std`导入的

### 第二个示例程序

第二个则是一个简单的四则运算器: 接受用户的输入并执行计算.

```batscript

```

### 第三个示例程序

第三个示例程序则更加复杂: 涉及到batScript更多基本语法,以及库Cmd,Std的基本使用.

### 第四个示例程序

### 第五个示例程序

## 保留字  

以下列出了`batScript`中的所有保留字:  

|名称|说明|
|---|---|
|`set`|声明变量|
|`let`|声明常量|
|`num`|数字型|
|`str`|字符串型|
|`bool`|布尔型|
|`arr`|数组型|
|`lib`|导入库|
|`pkg`|导入文件|
|`if`|选择|
|`elif`|选择分支|
|`else`|选择其它|
|`match`|匹配|
|`codition`|匹配情况|
|`while`|普通循环|
|`loop`|无限循环|
|`repeat`|次数循环|
|`iterate`|可迭代体循环|
|`circle`|可迭代体环循环|
|`continue`|跳过本轮循环|
|`break`|循环中止|
|`and`|且|
|`or`|或|
|`not`|非|
|`proc`|声明过程|
|`func`|声明函数|
|`return`|返回值|
|`err`|异常|
|`endprogram`|程序中止|
|`insert`|嵌入批处理文件|
|`runraw`|内嵌批处理代码|

---
**导航**

[上一个](./02-安装与使用.md) | [下一个](./04-类型系统.md)  
[教程目录](./01-教程目录.md) | [手册导览](../manual/手册导引.md) | [返回 README](../../../README-zh.md)